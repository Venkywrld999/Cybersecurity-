from cryptography.fernet import Fernet

def generate_key():
    return Fernet.generate_key()

def encrypt_message(message, key):
    fernet = Fernet(key)
    encrypted_message = fernet.encrypt(message.encode())
    return encrypted_message

def decrypt_message(encrypted_message, key):
    fernet = Fernet(key)
    decrypted_message = fernet.decrypt(encrypted_message).decode()
    return decrypted_message

def main():
    # Generate a key
    key = generate_key()

    # Get input from user
    plaintext = input("Enter the plaintext to encrypt: ")

    # Encrypt the plaintext
    encrypted_text = encrypt_message(plaintext, key)
    print("Encrypted message:", encrypted_text)

    # Display the encryption key
    print("Encryption key:", key.decode())

    # Decrypt the encrypted message
    decrypted_text = decrypt_message(encrypted_text, key)
    print("Decrypted message:", decrypted_text)

if __name__ == "__main__":
    main()
